
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Reglas para el registro de colegios
    match /schools/{schoolId} {
      allow read: if true;
      allow write: if request.auth != null; // Cualquiera puede registrar, pero solo admin puede editar/verificar
    }

    // Reglas para los jurados
    match /judges/{judgeId} {
      allow read, write: if request.auth != null; // Solo admins/moderadores autenticados
    }

    // Reglas para las puntuaciones
    match /scores/{scoreId} {
        allow read, write: if request.auth != null; // Solo admins/jurados autenticados
    }
    
    // Reglas para el estado del debate (pregunta, timer, ronda)
    match /debateState/{stateId} {
        allow read: if true; // Todos pueden leer el estado
        allow write: if request.auth != null; // Solo admins/moderadores pueden cambiarlo
    }

    // Reglas para las preguntas preparadas
    match /questions/{questionId} {
        allow read, write: if request.auth != null; // Solo admins/moderadores pueden gestionarlas
    }
  }
}
